{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils/assets\\script\\framework\\utils\\Log.js"],"names":["log","obj","window","setLogLevel","lv","modeEnum","cc","debug","DebugMode","debugMode","NONE","ERROR","WARN","INFO","_resetDebugSetting","error","arguments","length","Log_Priority","printLog","_","rest","warn","info","node","alert","title","content","formatLogList","sys","os","OS_ANDROID","OS_IOS","OS_OSX","jsb","reflection","callStaticMethod","report","fmt","msg","reportCache","indexOf","push","reportUrl","HttpUtil","getInstance","simpleRequest","mssxerror","tag","arr","toString","d","Date","ts","getHours","getMinutes","getSeconds","getMilliseconds","logms","call"],"mappings":";;;;AAAA;;AAEA,CAAC,YAAY;AACT,QAAIA,MAAM,SAASA,GAAT,CAAaC,GAAb,EAAkB;AACxB,YAAIA,eAAeD,GAAnB,EAAwB,OAAOC,GAAP;AACxB,YAAI,EAAE,gBAAgBD,GAAlB,CAAJ,EAA4B,OAAO,IAAIA,GAAJ,CAAQC,GAAR,CAAP;AAC/B,KAHD;;AAKA;AACAC,WAAOF,GAAP,GAAaA,GAAb;;AAEAA,QAAIG,WAAJ,GAAkB,UAAUC,EAAV,EAAc;AAC5B,YAAIC,WAAWC,GAAGC,KAAH,CAASC,SAAxB;AACA,YAAIC,YAAYJ,SAASK,IAAzB;AACA,aAAKN,EAAL,KAAYK,YAAYA,UAAUE,KAAlC;AACA,aAAKP,EAAL,KAAYK,YAAYA,UAAUG,IAAlC;AACA,aAAKR,EAAL,KAAYK,YAAYA,UAAUI,IAAlC;AACAP,WAAGC,KAAH,CAASO,kBAAT,CAA4BL,SAA5B;AACH,KAPD;;AASAT,QAAIe,KAAJ,GAAY,YAAY;AACpB,YAAIC,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,YAAI,KAAKC,YAAL,GAAoB,CAAxB,EAA2B;AAC3B,aAAKC,QAAL,CAAc,OAAd,EAAuBH,UAAU,CAAV,CAAvB,EAAqCI,EAAEC,IAAF,CAAOL,SAAP,CAArC;AACH,KAJD;AAKAhB,QAAIsB,IAAJ,GAAW,YAAY;AACnB,YAAIN,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,YAAI,KAAKC,YAAL,GAAoB,CAAxB,EAA2B;AAC3B,aAAKC,QAAL,CAAc,MAAd,EAAsBH,UAAU,CAAV,CAAtB,EAAoCI,EAAEC,IAAF,CAAOL,SAAP,CAApC;AACH,KAJD;AAKAhB,QAAIuB,IAAJ,GAAW,YAAY;AACnB,YAAIP,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,YAAI,KAAKC,YAAL,GAAoB,CAAxB,EAA2B;AAC3B,aAAKC,QAAL,CAAc,KAAd,EAAqBH,UAAU,CAAV,CAArB,EAAmCI,EAAEC,IAAF,CAAOL,SAAP,CAAnC;AACH,KAJD;AAKAhB,QAAIwB,IAAJ,GAAW,YAAY;AACnB,YAAIR,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,YAAI,KAAKC,YAAL,GAAoB,CAAxB,EAA2B;AAC3B,aAAKC,QAAL,CAAc,QAAd,EAAwBH,UAAU,CAAV,CAAxB,EAAsCI,EAAEC,IAAF,CAAOL,SAAP,CAAtC;AACH,KAJD;AAKAhB,QAAIyB,KAAJ,GAAY,YAAY;AACpB,YAAIT,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC5B,YAAI,KAAKC,YAAL,GAAoB,CAAxB,EAA2B;;AAE3B,YAAIQ,QAAQ,EAAZ;AACA,YAAIC,UAAU,EAAd;AACA,YAAIX,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AACxBU,sBAAUX,UAAU,CAAV,CAAV;AACH,SAFD,MAEO,IAAIA,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;AAC/BS,oBAAQV,UAAU,CAAV,CAAR;AACAW,sBAAUX,UAAU,CAAV,CAAV;AACH,SAHM,MAGA;AACHU,oBAAQV,UAAU,CAAV,CAAR;AACAW,sBAAUX,UAAU,CAAV,EAAaY,aAAb,CAA2BR,EAAEC,IAAF,CAAOL,SAAP,EAAkB,CAAlB,CAA3B,CAAV;AACH;AACD,YAAIV,GAAGuB,GAAH,CAAOC,EAAP,IAAaxB,GAAGuB,GAAH,CAAOE,UAAxB,EAAoC;AAChC;AACH,SAFD,MAEO,IAAIzB,GAAGuB,GAAH,CAAOC,EAAP,IAAaxB,GAAGuB,GAAH,CAAOG,MAAxB,EAAgC;AACnChC,gBAAIe,KAAJ,CAAUW,QAAQC,OAAlB;AACH,SAFM,MAEA,IAAIrB,GAAGuB,GAAH,CAAOC,EAAP,IAAaxB,GAAGuB,GAAH,CAAOI,MAAxB,EAAgC;AACnCjC,gBAAIe,KAAJ,CAAUW,QAAQC,OAAlB;AACAO,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgC,eAAhC,EAAiD,mCAAjD,EAAsFV,KAAtF,EAA6FC,OAA7F;AACH;AACJ,KAvBD;AAwBA3B,QAAIqC,MAAJ,GAAa,UAAUC,GAAV,EAAe;AACxB,YAAItB,UAAUC,MAAV,GAAmB,CAAvB,EAA0B;AACtB,gBAAIsB,MAAMD,IAAIV,aAAJ,CAAkBR,EAAEC,IAAF,CAAOL,SAAP,CAAlB,CAAV;AACH,SAFD,MAEO;AACHuB,kBAAMD,GAAN;AACH;;AAED,YAAIE,YAAYC,OAAZ,CAAoBF,GAApB,MAA6B,CAAC,CAAlC,EAAqC;AACjC;AACH;;AAEDC,oBAAYE,IAAZ,CAAiBH,GAAjB;AACA,YAAII,YAAY,uCAAhB;AACAC,iBAASC,WAAT,GAAuBC,aAAvB,CAAqCH,SAArC,EAAgD;AAC5CI,uBAAWR;AADiC,SAAhD;AAGH,KAhBD;AAiBAvC,QAAImB,QAAJ,GAAe,UAAU6B,GAAV,EAAeV,GAAf,EAAoBW,GAApB,EAAyB;AACpC,YAAIX,QAAQ,IAAZ,EAAkB;AACd;AACH;AACD,YAAIW,QAAQ,IAAZ,EAAkB;AACd;AACH;AACD,YAAIV,MAAMU,IAAIhC,MAAJ,IAAc,CAAd,GAAkBqB,IAAIY,QAAJ,GAAetB,aAAf,CAA6BqB,GAA7B,CAAlB,GAAsDX,GAAhE;AACA,YAAIa,IAAI,IAAIC,IAAJ,EAAR;AACA,YAAIC,KAAKF,EAAEG,QAAF,KAAe,GAAf,GAAqBH,EAAEI,UAAF,EAArB,GAAsC,GAAtC,GAA4CJ,EAAEK,UAAF,EAA5C,GAA6D,GAA7D,GAAmEL,EAAEM,eAAF,EAA5E;AACA,YAAIC,QAAQ,OAAOV,GAAP,GAAa,IAAb,GAAoBK,EAApB,GAAyB,KAAzB,GAAiCd,GAA7C;AACA;AACA,YAAI,CAAC,CAACjC,GAAG0C,GAAH,CAAN,EAAe;AACX1C,eAAG0C,GAAH,EAAQU,KAAR;AACH,SAFD,MAEO;AACHpD,eAAGN,GAAH,CAAO0D,KAAP;AACH;AACJ,KAjBD;AAkBH,CAjGD,EAiGGC,IAjGH","file":"Log.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils","sourcesContent":["'use strict';\r\n\r\n(function () {\r\n    var log = function log(obj) {\r\n        if (obj instanceof log) return obj;\r\n        if (!(this instanceof log)) return new log(obj);\r\n    };\r\n\r\n    //接微信渠道出现作用域问题\r\n    window.log = log;\r\n\r\n    log.setLogLevel = function (lv) {\r\n        let modeEnum = cc.debug.DebugMode;\r\n        let debugMode = modeEnum.NONE;\r\n        1 == lv && (debugMode = debugMode.ERROR);\r\n        2 == lv && (debugMode = debugMode.WARN);\r\n        3 == lv && (debugMode = debugMode.INFO);\r\n        cc.debug._resetDebugSetting(debugMode);\r\n    };\r\n\r\n    log.error = function () {\r\n        if (arguments.length === 0) return;\r\n        if (this.Log_Priority < 1) return;\r\n        this.printLog(\"error\", arguments[0], _.rest(arguments));\r\n    };\r\n    log.warn = function () {\r\n        if (arguments.length === 0) return;\r\n        if (this.Log_Priority < 2) return;\r\n        this.printLog(\"warn\", arguments[0], _.rest(arguments));\r\n    };\r\n    log.info = function () {\r\n        if (arguments.length === 0) return;\r\n        if (this.Log_Priority < 3) return;\r\n        this.printLog(\"log\", arguments[0], _.rest(arguments));\r\n    };\r\n    log.node = function () {\r\n        if (arguments.length === 0) return;\r\n        if (this.Log_Priority < 0) return;\r\n        this.printLog(\"node->\", arguments[0], _.rest(arguments));\r\n    };\r\n    log.alert = function () {\r\n        if (arguments.length === 0) return;\r\n        if (this.Log_Priority < 4) return;\r\n\r\n        var title = \"\";\r\n        var content = \"\";\r\n        if (arguments.length === 1) {\r\n            content = arguments[0];\r\n        } else if (arguments.length === 2) {\r\n            title = arguments[0];\r\n            content = arguments[1];\r\n        } else {\r\n            title = arguments[0];\r\n            content = arguments[1].formatLogList(_.rest(arguments, 2));\r\n        }\r\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n            //jsb.reflection.callStaticMethod(\"org/cocos2dx/js_tests/AppActivity\", \"showAlertDialog\", \"(Ljava/lang/String;Ljava/lang/String;)V\", title, content);\r\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\r\n            log.error(title + content);\r\n        } else if (cc.sys.os == cc.sys.OS_OSX) {\r\n            log.error(title + content);\r\n            jsb.reflection.callStaticMethod(\"NativeOcClass\", \"callNativeUIWithTitle:andContent:\", title, content);\r\n        }\r\n    };\r\n    log.report = function (fmt) {\r\n        if (arguments.length > 1) {\r\n            var msg = fmt.formatLogList(_.rest(arguments));\r\n        } else {\r\n            msg = fmt;\r\n        }\r\n\r\n        if (reportCache.indexOf(msg) !== -1) {\r\n            return;\r\n        }\r\n\r\n        reportCache.push(msg);\r\n        var reportUrl = \"http://msg.client.dreamjelly.com/send\";\r\n        HttpUtil.getInstance().simpleRequest(reportUrl, {\r\n            mssxerror: msg\r\n        });\r\n    };\r\n    log.printLog = function (tag, fmt, arr) {\r\n        if (fmt === null) {\r\n            return;\r\n        }\r\n        if (arr === null) {\r\n            return;\r\n        }\r\n        var msg = arr.length != 0 ? fmt.toString().formatLogList(arr) : fmt;\r\n        var d = new Date();\r\n        var ts = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds() + '.' + d.getMilliseconds();\r\n        var logms = \" [\" + tag + \"] \" + ts + \" : \" + msg;\r\n        // if (client) {\r\n        if (!!cc[tag]) {\r\n            cc[tag](logms);\r\n        } else {\r\n            cc.log(logms);\r\n        }\r\n    };\r\n}).call(this);"]}