{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils/assets\\script\\framework\\utils\\FuncTools.js"],"names":["ConfigManager","require","FuncTools","funcNames","name","toggle","itemIdToFuncs","initFunMask","code","i","length","Math","pow","cc","log","exchangeItemConfig","getFuncStatus","itemFConfig","getConfig","itemConfig","newConfigs","j","itemid","push","n","m","module","exports"],"mappings":";;;;;;AACA,IAAMA,gBAAgBC,QAAQ,eAAR,CAAtB;;AAEA,IAAIC,YAAY;AACZC,eAAU,CAAC,EAACC,MAAK,OAAN,EAAcC,QAAO,CAArB,EAAD,EAAyB,EAACD,MAAK,WAAN,EAAkBC,QAAO,CAAzB,EAAzB,EAAqD,EAACD,MAAK,WAAN,EAAkBC,QAAO,CAAzB,EAArD,EAAiF,EAACD,MAAK,YAAN,EAAmBC,QAAO,CAA1B,EAAjF,EAA8G,EAACD,MAAK,UAAN,EAAiBC,QAAO,CAAxB,EAA9G,EAAyI,EAACD,MAAK,QAAN,EAAeC,QAAO,CAAtB,EAAzI,CADE,EACiK;AAC7KC,mBAAc,EAAC,cAAa,CAAC,IAAD,CAAd,EAFF,EAEwB;AACpC;AACAC,iBAAa,qBAASC,IAAT,EAAc;AACvB,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKN,SAAL,CAAeO,MAAnC,EAA2CD,GAA3C,EAAgD;AAC5C,iBAAKN,SAAL,CAAeM,CAAf,EAAkBJ,MAAlB,GAA2BG,OAAOG,KAAKC,GAAL,CAAS,CAAT,EAAWH,CAAX,CAAlC;AACAI,eAAGC,GAAH,CAAO,KAAKX,SAAL,CAAeM,CAAf,CAAP,EAAyBD,IAAzB;AACH;AACD,aAAKO,kBAAL;AACH,KAVW;;AAYZ;AACAC,mBAAe,uBAASZ,IAAT,EAAc;AACzB,aAAK,IAAIK,IAAI,CAAb,EAAiBA,IAAI,KAAKN,SAAL,CAAeO,MAApC,EAA4CD,GAA5C,EAAiD;AAC7C,gBAAI,KAAKN,SAAL,CAAeM,CAAf,EAAkBL,IAAlB,KAA2BA,IAA/B,EAAqC;AACjC,uBAAO,KAAKD,SAAL,CAAeM,CAAf,EAAkBJ,MAAlB,GAA2B,CAAlC;AACH;AACJ;AACD,eAAO,KAAP;AACH,KApBW;;AAsBZ;AACAU,wBAAoB,8BAAU;AAC1B,YAAI,KAAKC,aAAL,CAAmB,YAAnB,CAAJ,EAAsC;AAClC,gBAAIC,cAAcjB,cAAckB,SAAd,CAAwB,QAAxB,CAAlB;AACA,gBAAIC,aAAanB,cAAckB,SAAd,CAAwB,MAAxB,CAAjB;AACA,gBAAIE,aAAa,EAAjB;AACA,gBAAI,CAAC,CAACH,WAAN,EAAmB;AACf,qBAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,YAAYP,MAAhC,EAAyCD,GAAzC,EAA8C;AAC1C,yBAAK,IAAIY,IAAI,CAAb,EAAiBA,IAAI,KAAKf,aAAL,CAAmB,YAAnB,EAAiCI,MAAtD,EAA8DW,GAA9D,EAAmE;AAC/D,4BAAIJ,YAAYR,CAAZ,EAAea,MAAf,KAA0B,KAAKhB,aAAL,CAAmB,YAAnB,EAAiCe,CAAjC,CAA9B,EAAmE;AAC/DD,uCAAWG,IAAX,CAAgBN,YAAYR,CAAZ,CAAhB;AACA;AACH;AACJ;AACJ;AACJ;;AAED,gBAAI,CAAC,CAACW,UAAF,IAAgB,CAAC,CAACD,UAAtB,EAAkC;AAC9B,qBAAK,IAAIK,IAAI,CAAb,EAAiBA,IAAIJ,WAAWV,MAAhC,EAAwCc,GAAxC,EAA6C;AACzC,yBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIN,WAAWT,MAA/B,EAAuCe,GAAvC,EAA6C;AACzC,4BAAIL,WAAWI,CAAX,EAAcF,MAAd,KAAyBH,WAAWM,CAAX,EAAcH,MAA3C,EAAmD;AAC/CH,uCAAWM,CAAX,IAAgBL,WAAWI,CAAX,CAAhB;AACA;AACH;AAEJ;AACJ;AACJ;AAEJ;AACJ;;AApDW,CAAhB;AAyDAE,OAAOC,OAAP,GAAiBzB,SAAjB","file":"FuncTools.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils","sourcesContent":["\r\nconst ConfigManager = require('ConfigManager');\r\n\r\nlet FuncTools = {\r\n    funcNames:[{name:'match',toggle:0},{name:'item_send',toggle:0},{name:'item_sell',toggle:0},{name:'match_item',toggle:0},{name:'exchange',toggle:0},{name:'charge',toggle:0}],//功能名称\r\n    itemIdToFuncs:{'match_item':[1204]},//功能对应的id\r\n    //初始化功能开启掩码\r\n    initFunMask: function(code){\r\n        for (let i = 0; i < this.funcNames.length; i++) {\r\n            this.funcNames[i].toggle = code & Math.pow(2,i);\r\n            cc.log(this.funcNames[i],code);\r\n        }\r\n        this.exchangeItemConfig();\r\n    },\r\n\r\n    //获得功能开关\r\n    getFuncStatus: function(name){\r\n        for (let i = 0 ; i < this.funcNames.length; i++) {\r\n            if (this.funcNames[i].name === name) {\r\n                return this.funcNames[i].toggle > 0;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    \r\n    //转换\r\n    exchangeItemConfig: function(){\r\n        if (this.getFuncStatus('match_item')) {\r\n            let itemFConfig = ConfigManager.getConfig('Item-f');\r\n            let itemConfig = ConfigManager.getConfig('Item');\r\n            let newConfigs = [];\r\n            if (!!itemFConfig) {\r\n                for (let i = 0; i < itemFConfig.length ; i++) {\r\n                    for (let j = 0 ; j < this.itemIdToFuncs['match_item'].length; j++) {\r\n                        if (itemFConfig[i].itemid === this.itemIdToFuncs['match_item'][j]) {\r\n                            newConfigs.push(itemFConfig[i]);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!!newConfigs && !!itemConfig) {\r\n                for (let n = 0 ; n < newConfigs.length; n++) {\r\n                    for (let m = 0; m < itemConfig.length; m++ ) {\r\n                        if (newConfigs[n].itemid === itemConfig[m].itemid) {\r\n                            itemConfig[m] = newConfigs[n];\r\n                            break;\r\n                        }\r\n                        \r\n                    }        \r\n                }\r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n\r\n\r\n};\r\nmodule.exports = FuncTools;\r\n"]}