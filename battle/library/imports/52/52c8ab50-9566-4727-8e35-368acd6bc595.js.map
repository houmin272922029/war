{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils/assets\\script\\framework\\utils\\Extentions.js"],"names":["Base64","require","Global","AudioManager","String","prototype","formatLogList","value","args","index","replace","val","_","isUndefined","str","JSON","stringify","e","formatList","arguments","splice","remove","slice","Math","abs","decodeByBase64","decode","encodeByBase64","encode","regxToNumber","regx","regxToChar","regxToCharAndNumber","regxToName","regxToMail","regxToValidString","deleteBlankString","GetLen","regEx","test","length","oMatches","match","oLength","toArtNumber","symbol","parseInt","paramNumber","iNumCount","numArray","newString","i","num","charAt","push","indexOf","hundredMilion","tenThousand","substring","Number","cc","Node","setNodeColor","color","setColor","node","children","setEnabled","enabled","log","info","btn","getComponent","Button","sprite","Sprite","interactable","_sgNode","setState","Color","WHITE","loadFromUrl","url","self","spriteUrl","data","type","spriteFrame","undefined","loadIndex","loadStep","loader","load","err","texture","raw","SpriteFrame","getScript","_bindScript","_components","_bindToNode","Label","onLoad","fontFamily","font","Widget","start","alignMode","game","EventManager","on","isValid","updateAlignment","Canvas","sys","isBrowser","isMobile","fitWidth","fitHeight","size","view","getFrameSize","width","height","designSize","_onTouchEnded","event","enabledInHierarchy","_pressed","Component","EventHandler","emitEvents","clickEvents","emit","_updateState","stopPropagation","playEffect","simpleBtnEffect","dispatchEvent","eventName","matchTipsEvent"],"mappings":"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","file":"Extentions.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\framework\\utils","sourcesContent":["const Base64 = require('Base64');\r\nconst Global = require('Global');\r\nconst AudioManager = require('AudioManager');\r\n\r\n// String  字符串延伸函数\r\nString.prototype.formatLogList = function (value) {\r\n    var args = value;\r\n    var index = 0;\r\n    return this.replace(/\\{(\\d*)\\}/g, function () {\r\n        var val = args[index];\r\n        index++;\r\n        if (_.isUndefined(val)) {\r\n            return \"\";\r\n        } else if (typeof val == \"function\") {\r\n            return val;\r\n        }\r\n        try {\r\n            var str = JSON.stringify(val);\r\n        } catch (e) {\r\n            str = val;\r\n        }\r\n        return str;\r\n    });\r\n};\r\nString.prototype.formatList = function (value) {\r\n    var args = value;\r\n    if (typeof value != 'object' && typeof value != 'array') args = arguments;\r\n\r\n    return this.replace(/\\{(\\d+)\\}/g, function () {\r\n        var val = args[arguments[1]];\r\n        return (val == null) ? arguments[0] : val;\r\n\r\n    });\r\n};\r\nString.prototype.splice = function (index, remove, str) {\r\n    return this.slice(0, index) + str + this.slice(index + Math.abs(remove));\r\n};\r\nString.prototype.decodeByBase64 = function () {\r\n    return Base64.decode(this);\r\n};\r\nString.prototype.encodeByBase64 = function () {\r\n    return Base64.encode(this);\r\n};\r\n\r\n// 正则取0-9\r\nString.prototype.regxToNumber = function () {\r\n    var regx = /[^0-9]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则取char\r\nString.prototype.regxToChar = function () {\r\n    var regx = /[^A-Za-z]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则取有效\r\nString.prototype.regxToCharAndNumber = function () {\r\n    var regx = /[^A-Za-z0-9]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则取name\r\nString.prototype.regxToName = function () {\r\n    var regx = /[^\\u4e00-\\u9fa5A-Za-z]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则取邮箱账号\r\nString.prototype.regxToMail = function () {\r\n    var regx = /[^A-Za-z\\d\\@\\.\\-\\_]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则取有效字符\r\nString.prototype.regxToValidString = function () {\r\n    var regx = /[^\\u4e00-\\u9fa5A-Za-z0-9]/g;\r\n    return this.replace(regx, '');\r\n};\r\n// 正则去除空格字符\r\nString.prototype.deleteBlankString = function () {\r\n    var regx = /\\s|\\xA0/g;\r\n    return this.replace(regx, '');\r\n};\r\n//取字符串字节长度\r\nString.prototype.GetLen = function () {\r\n    var regEx = /^[\\u4e00-\\u9fa5\\uf900-\\ufa2d]+$/;\r\n    if (regEx.test(this)) {\r\n        return this.length * 2;\r\n    } else {\r\n        if (this.length > 0) {\r\n            var oMatches = this.match(/[\\x00-\\xff]/g);\r\n            var oLength = this.length * 2 - oMatches.length;\r\n            return oLength;\r\n        }\r\n        return 0;\r\n    }\r\n};\r\n\r\nString.prototype.toArtNumber = function (symbol) {\r\n    return toArtNumber(parseInt(this), symbol);\r\n};\r\n\r\nlet toArtNumber = function (paramNumber, symbol) {\r\n    paramNumber *= 10000;\r\n    if (symbol) {\r\n        if (paramNumber > 0) paramNumber = '<' + paramNumber;\r\n        if (paramNumber < 0) paramNumber = '=' + paramNumber;\r\n    }\r\n    if (paramNumber >= 100000000) {\r\n        if (paramNumber > 100000000) {\r\n            paramNumber += ':';\r\n            paramNumber += ';';\r\n        } else {\r\n            paramNumber += ';';\r\n        }\r\n    } else if (paramNumber > 10000) {\r\n        paramNumber += ':';\r\n    } else {\r\n        // return paramNumber;\r\n        return '0:';\r\n    }\r\n    var iNumCount = (paramNumber + \"\").length;\r\n    var numArray = [];\r\n    var newString = '';\r\n    for (i = 0; i < iNumCount; i++) {\r\n        var num = paramNumber.charAt(i);\r\n        numArray.push(num);\r\n    }\r\n    if (paramNumber.indexOf(':') > 0 && paramNumber.indexOf(';') > 0) {\r\n        var hundredMilion = numArray[numArray.length - 1];\r\n        var tenThousand = numArray[numArray.length - 2];\r\n        numArray.splice(numArray.length - 2, 2);\r\n\r\n        numArray.splice(numArray.length - 8, 0, hundredMilion);\r\n        numArray.splice(numArray.length - 4, 0, tenThousand);\r\n    } else if (paramNumber.indexOf(':') < 0 && paramNumber.indexOf(';') > 0) {\r\n        var hundredMilion = numArray[numArray.length - 1];\r\n        numArray.splice(numArray.length - 1, 1);\r\n        numArray.splice(numArray.length - 8, 0, hundredMilion);\r\n    } else if (paramNumber.indexOf(':') > 0 && paramNumber.indexOf(';') < 0) {\r\n        var tenThousand = numArray[numArray.length - 1];\r\n        numArray.splice(numArray.length - 1, 1);\r\n        numArray.splice(numArray.length - 4, 0, tenThousand);\r\n    }\r\n    for (var i = 0; i < numArray.length; i++) {\r\n        var str = numArray[i];\r\n        newString += str;\r\n    }\r\n    // return newString;\r\n    return newString.substring(0, newString.indexOf(':') + 1);\r\n}\r\n\r\nNumber.prototype.toArtNumber = function (symbol) {\r\n    return toArtNumber(this, symbol);\r\n}\r\n\r\n\r\n\r\n// cc.Node 延伸函数\r\ncc.Node.prototype.setNodeColor = function (color) {\r\n    let setColor = function (node, color) {\r\n        node.color = color;\r\n        for (let i in node.children) {\r\n            setColor(node.children[i], color);\r\n        }\r\n    }\r\n    setColor(this, color);\r\n};\r\n\r\n// \r\ncc.Node.prototype.setEnabled = function (enabled) {\r\n    log.info(\"set node color gray\");\r\n    let setEnabled = function (node, enabled) {\r\n        let btn = node.getComponent(cc.Button);\r\n        let sprite = node.getComponent(cc.Sprite);\r\n        if (btn) {\r\n            btn.interactable = enabled;\r\n        } else if (sprite) {\r\n            sprite._sgNode.setState(enabled ? 0 : 1);\r\n        } else {\r\n            node.color = enabled ? cc.Color.WHITE : cc.color(175, 175, 175);\r\n        }\r\n\r\n        for (let i in node.children) {\r\n            setEnabled(node.children[i], enabled);\r\n        }\r\n    }\r\n    setEnabled(this, enabled);\r\n}\r\n\r\n\r\n// cc.Node 延伸函数\r\ncc.Sprite.prototype.loadFromUrl = function (url) {\r\n    if (!!url && url.length > 0) {\r\n        let self = this;\r\n\r\n        if (self.spriteUrl == url) return -1;\r\n\r\n        let match = url.indexOf('.png');\r\n        let data = null;\r\n        if (match >= 0) {\r\n            data = url;\r\n        } else {\r\n            data = { url: url, type: 'png' };\r\n        }\r\n\r\n        self.spriteFrame = null;\r\n        self.spriteUrl = url;\r\n\r\n        if (undefined == self.loadIndex) self.loadIndex = 0;\r\n        var loadStep = {\r\n            url: url,\r\n            index: ++self.loadIndex,\r\n        }\r\n\r\n        cc.loader.load(data, function (err, texture) {\r\n            if (err) {\r\n                log.info('loadFrom {} failed!', data);\r\n                cc.loader.load(cc.url.raw(url), function (err, texture) {\r\n                    if (err) {\r\n                        log.info('loadFromUrl raw failed! err = {}', err);\r\n                    }\r\n                    else {\r\n                        if (loadStep.index == self.loadIndex) {\r\n                            self.spriteFrame = new cc.SpriteFrame(texture);\r\n                            self.loadIndex = 0;\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                if (loadStep.index == self.loadIndex) {\r\n                    self.spriteFrame = new cc.SpriteFrame(texture);\r\n                    self.loadIndex = 0;\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        log.info('loadFromUrl failed, url is undefined!', url);\r\n    }\r\n};\r\n\r\ncc.Node.prototype.getScript = function () {\r\n    if (!this._bindScript) {\r\n        for (let i in this._components) {\r\n            if (this._components[i]._bindToNode) {\r\n                this._bindScript = this._components[i];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return this._bindScript;\r\n};\r\n\r\ncc.Label.prototype.onLoad = function () {\r\n    if ('Microsoft Yahei' == this.fontFamily && !this.font) {\r\n        this.fontFamily = 'Arial';\r\n    }\r\n};\r\n\r\ncc.Widget.prototype.start = function () {\r\n    if (1 == this.alignMode) game.EventManager.on('ON_WINDOWS_RESIZE', () => { if (cc.isValid(this.node)) this.updateAlignment(); }, this.node);\r\n};\r\n\r\ncc.Canvas.prototype.onLoad = function () {\r\n    // log.error('canvas = {}, view = {}', this.designResolution, cc.view.getVisibleSize())\r\n    if (cc.sys.isBrowser && !cc.sys.isMobile) {\r\n        // 电脑浏览器\r\n        this.fitWidth = true;\r\n        this.fitHeight = true;\r\n    } else {\r\n        let size = cc.view.getFrameSize();\r\n        if (size.width / size.height < 16 / 9) {\r\n            // 窄屏\r\n            this.fitWidth = true;\r\n            this.fitHeight = false;\r\n            Global.designSize.height = 720 * size.width / size.height;\r\n        } else {\r\n            // 宽屏\r\n            this.fitWidth = false;\r\n            this.fitHeight = true;\r\n        }\r\n    }\r\n};\r\n\r\ncc.Button.prototype._onTouchEnded =  function (event) {\r\n    if (!this.interactable || !this.enabledInHierarchy) return;\r\n\r\n    if (this._pressed) {\r\n        cc.Component.EventHandler.emitEvents(this.clickEvents, event);\r\n        this.node.emit('click', this);\r\n    }\r\n    this._pressed = false;\r\n    this._updateState();\r\n    event.stopPropagation();\r\n\r\n    // 按钮点击 音效\r\n    AudioManager.playEffect(Global.simpleBtnEffect);\r\n    Global.simpleBtnEffect = \"tongyong_anniudianji\";\r\n    game.EventManager.dispatchEvent(Global.eventName.matchTipsEvent, {});  //话费赛欢迎tips\r\n};\r\n\r\n// if (cc.ENGINE_VERSION.indexOf('2.') < 0) {\r\n//     let errorTip = function (tip) {\r\n//         log.error('该api 即将废弃，请使用.x或.y', tip);\r\n//         cc.game.pause();\r\n//     }\r\n//     cc.Node.prototype.setPositionX = errorTip;\r\n//     cc.Node.prototype.setPositionY = errorTip;\r\n//     cc.Node.prototype.getPositionX = errorTip;\r\n//     cc.Node.prototype.getPositionY = errorTip;\r\n// }\r\n\r\n// cc.Widget.prototype.onLoad = function () {\r\n//     let size = cc.view.getVisibleSize();\r\n//     let canvas = cc.find('Canvas');\r\n//     if (this.node.parent === canvas) {\r\n//         if (size.width / size.height < 16 / 9) {\r\n//             // 窄屏\r\n//             let offSize = size.height - 720;\r\n//             if (this.isAlignTop) this.top -= offSize / 2;\r\n//             if (this.isAlignBottom) this.bottom -= offSize / 2;\r\n//         }\r\n//     }\r\n// };\r\n\r\n// cc.Sprite.prototype.setTexture = function (url) {\r\n//     let texture = cc.textureCache.getTextureForKey(url);\r\n//     if (!texture) {\r\n//         // 记录手动加载的纹理\r\n//         if (!this.releaseTextureArray) this.releaseTextureArray = [];\r\n//         this.releaseTextureArray.push(url);\r\n//         this.releaseTextureArray.push(url);\r\n//         let self = this;\r\n\r\n//         let func = self.onDestroy;\r\n//         this.onDestroy = function () {\r\n//             //调用自身原始onDestroy\r\n//             if (typeof func == 'function') func.call(self);\r\n//             //释放所有手动加载过的纹理\r\n//             for (let i in self.releaseTextureArray) {\r\n//                 cc.loader.release(self.releaseTextureArray[i]);\r\n//             }\r\n//         }\r\n//     }\r\n//     // 切换纹理\r\n//     this.spriteFrame = new cc.SpriteFrame(url);\r\n// };"]}