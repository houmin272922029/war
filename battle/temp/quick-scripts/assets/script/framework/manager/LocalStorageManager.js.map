{"version":3,"sources":["LocalStorageManager.js"],"names":["LocalStorageManager","setItem","key","value","cc","sys","localStorage","getItem","setJsonItem","jsonData","JSON","stringify","getJsonItem","str","parse","removeItem","isSameDay","data","time","nowDate","Date","now","saveDate","getFullYear","getMonth","getDate","module","exports"],"mappings":";;;;;;AACA;;AAEA,IAAIA,sBAAsB;;AAEtBC,aAAS,iBAASC,GAAT,EAAaC,KAAb,EAAmB;AACxBC,WAAGC,GAAH,CAAOC,YAAP,CAAoBL,OAApB,CAA4BC,GAA5B,EAAiCC,KAAjC;AACH,KAJqB;;AAMtBI,aAAS,iBAASL,GAAT,EAAa;AAClB,eAAOE,GAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,CAAP;AACH,KARqB;;AAWtBM,iBAAa,qBAASN,GAAT,EAAaO,QAAb,EAAsB;AAC/BL,WAAGC,GAAH,CAAOC,YAAP,CAAoBL,OAApB,CAA4BC,GAA5B,EAAiCQ,KAAKC,SAAL,CAAeF,QAAf,CAAjC;AACH,KAbqB;;AAetBG,iBAAa,qBAASV,GAAT,EAAa;AACtB,YAAIW,MAAMT,GAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,CAAV;AACA,YAAI,CAAC,CAACW,GAAN,EAAW;AACP,mBAAOH,KAAKI,KAAL,CAAWD,GAAX,CAAP;AACH;AACD,eAAO,IAAP;AACH,KArBqB;;AAuBtBE,gBAAY,oBAASb,GAAT,EAAa;AACrBE,WAAGC,GAAH,CAAOC,YAAP,CAAoBS,UAApB,CAA+Bb,GAA/B;AACH,KAzBqB;;AA4BtB;AACA;AACAc,eAAW,mBAASd,GAAT,EAAa;AACpB,YAAIe,OAAO,KAAKL,WAAL,CAAiBV,GAAjB,CAAX;AACA,YAAI,CAAC,CAACe,IAAF,IAAU,CAAC,CAACA,KAAKC,IAArB,EAA2B;AACvB,gBAAIC,UAAU,IAAIC,IAAJ,CAASA,KAAKC,GAAL,EAAT,CAAd;AACA,gBAAIC,WAAW,IAAIF,IAAJ,CAASH,KAAKC,IAAd,CAAf;AACA,gBAAIC,QAAQI,WAAR,MAAyBD,SAASC,WAAT,EAAzB,IAAmDJ,QAAQK,QAAR,MAAsBF,SAASE,QAAT,EAAzE,IAAgGL,QAAQM,OAAR,MAAqBH,SAASG,OAAT,EAAzH,EAA6I;AACzI,uBAAO,KAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH;;AAxCqB,CAA1B;AA2CAC,OAAOC,OAAP,GAAiB3B,mBAAjB","file":"LocalStorageManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\framework\\manager","sourcesContent":["\r\n//本地存储 包括一个时间计算\r\n            \r\nlet LocalStorageManager = {\r\n\r\n    setItem: function(key,value){\r\n        cc.sys.localStorage.setItem(key, value);\r\n    },\r\n\r\n    getItem: function(key){\r\n        return cc.sys.localStorage.getItem(key);\r\n    },\r\n\r\n\r\n    setJsonItem: function(key,jsonData){\r\n        cc.sys.localStorage.setItem(key, JSON.stringify(jsonData));\r\n    },\r\n\r\n    getJsonItem: function(key){\r\n        let str = cc.sys.localStorage.getItem(key);\r\n        if (!!str) {\r\n            return JSON.parse(str);\r\n        }\r\n        return null;\r\n    },\r\n\r\n    removeItem: function(key){\r\n        cc.sys.localStorage.removeItem(key);\r\n    },\r\n\r\n\r\n    //检查当前key存储的数据是否是在当前天\r\n    //需要存储的格式{time:xxxx,count:xxxx}\r\n    isSameDay: function(key){\r\n        let data = this.getJsonItem(key);\r\n        if (!!data && !!data.time) {\r\n            let nowDate = new Date(Date.now());\r\n            let saveDate = new Date(data.time);\r\n            if (nowDate.getFullYear() != saveDate.getFullYear() || nowDate.getMonth() != saveDate.getMonth() || nowDate.getDate() != saveDate.getDate()) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n};\r\nmodule.exports = LocalStorageManager;"]}