{"version":3,"sources":["Alert.js"],"names":["BaseUI","require","UIManager","ResManager","ComponentTools","ViewManager","cc","Class","extends","properties","statics","show","content","onok","needcancel","oncancel","lineHeight","alertData","showUI","prefabURL","alert","onLoad","parentLayer","getPopLayerFromScene","_bgSprite","node","getChildByName","_content","find","_btnOK","_btnCancel","onShow","prefab","data","_super","onBtnClicked","event","parseInt","_onok","onClose","simpleBtnEffect","_oncancel","richLabelString","active","x","width"],"mappings":";;;;;;AAAA;AACA,IAAMA,SAASC,QAAQ,QAAR,CAAf;AACA,IAAMC,YAAYD,QAAQ,WAAR,CAAlB;AACA,IAAME,aAAaF,QAAQ,YAAR,CAAnB;AACA,IAAMG,iBAAiBH,QAAQ,gBAAR,CAAvB;AACA,IAAMI,cAAcJ,QAAQ,aAAR,CAApB;AACAK,GAAGC,KAAH,CAAS;AACLC,aAASR,MADJ;;AAGLS,gBAAY,EAHP;;AAOL;AACAC,aAAS;AACLC,cAAM,cAAUC,OAAV,EAAmBC,IAAnB,EAAyBC,UAAzB,EAAqCC,QAArC,EAAgE;AAAA,gBAAjBC,UAAiB,uEAAJ,EAAI;;AAClE,gBAAIC,YAAY,EAAEL,gBAAF,EAAWC,UAAX,EAAiBC,sBAAjB,EAA6BC,kBAA7B,EAAuCC,sBAAvC,EAAhB;AACAd,sBAAUgB,MAAV,CAAiBf,WAAWgB,SAAX,CAAqBC,KAAtC,EAA6CH,SAA7C;AACH;AAJI,KARJ;;AAeLI,YAAQ,kBAAY;AAChB,aAAKC,WAAL,GAAmBjB,YAAYkB,oBAAZ,EAAnB;AACA,aAAKC,SAAL,GAAiB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,CAAjB,CAFgB,CAE+D;AAC/E,aAAKC,QAAL,GAAgBrB,GAAGsB,IAAH,CAAQ,kBAAR,EAA4B,KAAKH,IAAjC,CAAhB,CAHgB,CAG+D;AAC/E,aAAKI,MAAL,GAAc,KAAKJ,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAd,CAJgB,CAI+D;AAC/E,aAAKI,UAAL,GAAkB,KAAKL,IAAL,CAAUC,cAAV,CAAyB,YAAzB,CAAlB,CALgB,CAK+D;AAClF,KArBI;;AAwBLK,YAAQ,gBAAUC,MAAV,EAAkBC,IAAlB,EAAwB;AAC5B,aAAKC,MAAL,CAAYF,MAAZ,EAAoBC,IAApB;AACA,aAAKtB,IAAL,CAAUsB,KAAKrB,OAAf,EAAwBqB,KAAKpB,IAA7B,EAAmCoB,KAAKnB,UAAxC,EAAoDmB,KAAKlB,QAAzD,EAAmEkB,KAAKjB,UAAxE;AACH,KA3BI;;AA6BL;AACAmB,kBAAc,sBAAUC,KAAV,EAAiBH,IAAjB,EAAuB;AACjC,YAAII,SAASJ,IAAT,MAAmB,CAAvB,EAA0B;AACtB,gBAAI,KAAKK,KAAT,EAAgB;AACZ,qBAAKA,KAAL;AACH;AACD,iBAAKC,OAAL,CAAa,EAAEC,iBAAiB,sBAAnB,EAAb;AACH,SALD,MAKO;AACH,gBAAI,KAAKC,SAAT,EAAoB;AAChB,qBAAKA,SAAL;AACH;AACD,iBAAKF,OAAL;AACH;AACJ,KA1CI;;AA4CL;;;;;;;AAOA5B,UAAM,cAAUC,OAAV,EAAmBC,IAAnB,EAAyBC,UAAzB,EAAqCC,QAArC,EAA+CC,UAA/C,EAA2D;AAC7D,aAAKsB,KAAL,GAAazB,IAAb;AACAT,uBAAesC,eAAf,CAA+B,KAAKf,QAApC,EAA8Cf,OAA9C,EAAuDI,UAAvD;AACA,YAAIF,UAAJ,EAAgB;AACZ,iBAAKgB,UAAL,CAAgBa,MAAhB,GAAyB,IAAzB;AACA,iBAAKd,MAAL,CAAYe,CAAZ,GAAgB,KAAKpB,SAAL,CAAeqB,KAAf,GAAuB,IAAvC;AACA,iBAAKf,UAAL,CAAgBc,CAAhB,GAAoB,CAAC,KAAKpB,SAAL,CAAeqB,KAAhB,GAAwB,IAA5C;AACA,gBAAI9B,QAAJ,EAAc;AACV,qBAAK0B,SAAL,GAAiB1B,QAAjB;AACH;AACJ,SAPD,MAQK;AACD,iBAAKe,UAAL,CAAgBa,MAAhB,GAAyB,KAAzB;AACA,iBAAKd,MAAL,CAAYe,CAAZ,GAAgB,CAAhB;AACH;AACJ;;AAED;AApEK,CAAT","file":"Alert.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\script\\framework\\ui","sourcesContent":["//Alert 弹窗\r\nconst BaseUI = require('BaseUI');\r\nconst UIManager = require('UIManager');\r\nconst ResManager = require('ResManager');\r\nconst ComponentTools = require('ComponentTools');\r\nconst ViewManager = require('ViewManager');\r\ncc.Class({\r\n    extends: BaseUI,\r\n\r\n    properties: {\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    statics: {\r\n        show: function (content, onok, needcancel, oncancel, lineHeight = 33) {\r\n            let alertData = { content, onok, needcancel, oncancel, lineHeight };\r\n            UIManager.showUI(ResManager.prefabURL.alert, alertData);\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.parentLayer = ViewManager.getPopLayerFromScene();\r\n        this._bgSprite = this.node.getChildByName(\"public_frame_a\");                   // 背景图片\r\n        this._content = cc.find('content/richText', this.node)                         // 提示的内容 label\r\n        this._btnOK = this.node.getChildByName(\"btn_ok\");                              // 确定按钮\r\n        this._btnCancel = this.node.getChildByName(\"btn_cancel\");                      // 取消按钮\r\n    },\r\n\r\n\r\n    onShow: function (prefab, data) {\r\n        this._super(prefab, data);\r\n        this.show(data.content, data.onok, data.needcancel, data.oncancel, data.lineHeight);\r\n    },\r\n\r\n    /** 按钮点击 回调 */\r\n    onBtnClicked: function (event, data) {\r\n        if (parseInt(data) === 0) {\r\n            if (this._onok) {\r\n                this._onok();\r\n            }\r\n            this.onClose({ simpleBtnEffect: \"tongyong_anniudianji\" });\r\n        } else {\r\n            if (this._oncancel) {\r\n                this._oncancel();\r\n            }\r\n            this.onClose();\r\n        }\r\n    },\r\n\r\n    /**\r\n     *  弹窗显示\r\n     * @param content 内容\r\n     * @param onok 确定按钮 回调函数\r\n     * @param needcancel 是否需要 取消按钮\r\n     * @param oncancel 取消按钮 回调函数\r\n     */\r\n    show: function (content, onok, needcancel, oncancel, lineHeight) {\r\n        this._onok = onok;\r\n        ComponentTools.richLabelString(this._content, content, lineHeight);\r\n        if (needcancel) {\r\n            this._btnCancel.active = true;\r\n            this._btnOK.x = this._bgSprite.width * 0.25;\r\n            this._btnCancel.x = -this._bgSprite.width * 0.25;\r\n            if (oncancel) {\r\n                this._oncancel = oncancel;\r\n            }\r\n        }\r\n        else {\r\n            this._btnCancel.active = false;\r\n            this._btnOK.x = 0;\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}